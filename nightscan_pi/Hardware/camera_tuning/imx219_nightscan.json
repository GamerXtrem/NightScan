{
  "version": 2.0,
  "target": "nightscanpi",
  "cameras": [
    {
      "model": "imx219",
      "tuning_file": "imx219_nightscan.json"
    }
  ],
  "algorithms": [
    {
      "rpi.black_level": {
        "black_level": 4096
      }
    },
    {
      "rpi.dpc": {
        "strength": 1
      }
    },
    {
      "rpi.lux": {
        "reference_shutter_speed": 13841,
        "reference_gain": 2.0,
        "reference_aperture": 1.0,
        "reference_lux": 900,
        "reference_Y": 12744
      }
    },
    {
      "rpi.noise": {
        "reference_constant": 0,
        "reference_slope": 2.776
      }
    },
    {
      "rpi.geq": {
        "offset": 204,
        "slope": 0.01078
      }
    },
    {
      "rpi.sdn": {
        "deviation": 1.6,
        "strength": 0.85
      }
    },
    {
      "rpi.awb": {
        "priors": [
          {
            "lux": 0,
            "prior": [2000, 1.0, 3000, 1.0, 5500, 6.0, 6500, 2.0, 8000, 1.0]
          },
          {
            "lux": 800,
            "prior": [2000, 1.0, 3000, 1.0, 5500, 4.0, 6500, 1.0, 8000, 1.0]
          },
          {
            "lux": 1500,
            "prior": [2000, 1.0, 3000, 1.0, 5500, 2.0, 6500, 1.0, 8000, 1.0]
          }
        ],
        "modes": {
          "auto": {"lo": 2500, "hi": 8000},
          "incandescent": {"lo": 2500, "hi": 3000},
          "tungsten": {"lo": 3000, "hi": 3500},
          "fluorescent": {"lo": 4000, "hi": 4700},
          "indoor": {"lo": 3000, "hi": 5000},
          "daylight": {"lo": 5500, "hi": 6500},
          "cloudy": {"lo": 7000, "hi": 8500}
        },
        "bayes": 0,
        "ct_curve": [
          2360.0, 1.0, 2870.0, 1.0, 2970.0, 1.0, 3100.0, 1.0, 3240.0, 1.0, 
          3570.0, 1.0, 4000.0, 1.0, 4450.0, 1.0, 4850.0, 1.0, 5500.0, 1.0, 
          6200.0, 1.0, 6400.0, 1.0, 7600.0, 1.0, 9500.0, 1.0
        ]
      }
    },
    {
      "rpi.agc": {
        "metering_modes": {
          "centre-weighted": {
            "weights": [3, 3, 3, 2, 2, 2, 2, 1, 1, 1, 1, 0, 0, 0, 0]
          },
          "spot": {
            "weights": [2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
          },
          "matrix": {
            "weights": [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
          }
        },
        "exposure_modes": {
          "normal": {
            "shutter": [100, 10000, 30000, 60000, 120000],
            "gain": [1.0, 2.0, 4.0, 6.0, 8.0]
          },
          "short": {
            "shutter": [100, 5000, 10000, 20000, 30000],
            "gain": [1.0, 2.0, 4.0, 6.0, 8.0]
          },
          "long": {
            "shutter": [100, 30000, 60000, 120000, 240000],
            "gain": [1.0, 2.0, 4.0, 8.0, 12.0]
          }
        },
        "constraint_modes": {
          "normal": {"bound": "CONSTRAINT_NORMAL"},
          "highlight": {"bound": "CONSTRAINT_UPPER"},
          "shadows": {"bound": "CONSTRAINT_LOWER"}
        },
        "y_target": [
          [0, 0.16],
          [1000, 0.165],
          [10000, 0.17]
        ]
      }
    },
    {
      "rpi.alsc": {
        "omega": 1.3,
        "n_iter": 100,
        "luminance_strength": 0.8,
        "calibrations_Cr": [
          {
            "ct": 3000,
            "table": [
              2.428, 2.409, 2.376, 2.333, 2.281, 2.228, 2.177, 2.133, 2.096, 2.066, 2.043, 2.025, 2.013, 2.004, 1.999, 1.997
            ]
          },
          {
            "ct": 5600,
            "table": [
              1.796, 1.786, 1.766, 1.738, 1.703, 1.664, 1.625, 1.589, 1.559, 1.534, 1.515, 1.502, 1.493, 1.488, 1.486, 1.486
            ]
          },
          {
            "ct": 6500,
            "table": [
              1.667, 1.659, 1.642, 1.619, 1.590, 1.558, 1.526, 1.496, 1.470, 1.449, 1.433, 1.422, 1.415, 1.412, 1.411, 1.412
            ]
          }
        ],
        "calibrations_Cb": [
          {
            "ct": 3000,
            "table": [
              1.646, 1.657, 1.679, 1.709, 1.746, 1.788, 1.832, 1.874, 1.912, 1.944, 1.969, 1.988, 1.999, 2.004, 2.004, 2.001
            ]
          },
          {
            "ct": 5600,
            "table": [
              1.422, 1.427, 1.440, 1.459, 1.484, 1.514, 1.547, 1.581, 1.614, 1.644, 1.670, 1.691, 1.706, 1.716, 1.720, 1.720
            ]
          },
          {
            "ct": 6500,
            "table": [
              1.349, 1.353, 1.364, 1.380, 1.401, 1.427, 1.455, 1.485, 1.515, 1.543, 1.567, 1.587, 1.602, 1.612, 1.617, 1.618
            ]
          }
        ]
      }
    },
    {
      "rpi.contrast": {
        "ce_enable": 1,
        "gamma_curve": [
          0, 0, 1024, 5040, 2048, 9338, 3072, 12356,
          4096, 15312, 5120, 18051, 6144, 20790, 7168, 23193,
          8192, 25744, 9216, 27942, 10240, 30035, 11264, 32005,
          12288, 33975, 13312, 35815, 14336, 37600, 15360, 39168,
          16384, 40642, 18432, 43379, 20480, 45749, 22528, 47753,
          24576, 49621, 26624, 51253, 28672, 52698, 30720, 53925,
          32768, 54979, 36864, 57012, 40960, 58656, 45056, 59954,
          49152, 61183, 53248, 62355, 57344, 63419, 61440, 64476,
          65535, 65535
        ]
      }
    },
    {
      "rpi.ccm": {
        "ccms": [
          {
            "ct": 2850,
            "ccm": [2.12089, -0.52461, -0.59629, -0.85342, 2.80445, -0.95103, -0.26897, -1.14678, 2.41575]
          },
          {
            "ct": 5600,
            "ccm": [2.01027, -0.54053, -0.46973, -0.42444, 1.94154, -0.51711, 0.00243, -0.81054, 1.80811]
          },
          {
            "ct": 6500,
            "ccm": [1.98861, -0.49240, -0.49621, -0.39053, 1.87474, -0.48421, 0.02566, -0.81933, 1.79367]
          }
        ]
      }
    },
    {
      "rpi.sharpen": {
        "threshold": 0.25,
        "strength": 1.2,
        "limit": 1.0
      }
    }
  ]
}